@(group: Group, groupForm: Form[Group])
@import helper._

@main("Gruppe bearbeiten") {

	<!-- Start infoModal -->
	 <div id="infoModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="infoModalLabel" aria-hidden="false">
	 	@views.html.Group.snippets.infoModal(group)    
	 </div>
	 <!-- Ende infoModal -->
		
	 <!-- Start confirmDeleteGroupModal -->
	 <div id="confirmDeleteGroup" class="modal fade" tabindex="-1" role="dialog">
	 	@views.html.Group.snippets.deleteGroupModal(group)   
	 </div>
	 <!-- End confirmDeleteGroupModal -->

	<h2 class="hp-truncate">@group.title</h2>		
	</br>
	
		<ul class="nav nav-tabs nav-justified">
  			<li><a href="@routes.GroupController.view(group.id)" role="button" class="btn btn-default" rel="tooltip" data-original-title="Gruppennewsstream" data-container="body"><span class="glyphicon glyphicon-comment"></span></a></li>
  			<li><a href="@routes.GroupController.media(group.id)" role="button" class="btn btn-default" rel="tooltip" data-original-title="Gruppenmedien" data-container="body"><span class="glyphicon glyphicon-file"></span></a></li>
			@if(Secured.isOwnerOfGroup(group, Component.currentAccount)) {
				<li class="active"><a href="@routes.GroupController.edit(group.id)" role="button" class="btn btn-default active" rel="tooltip" data-original-title="Gruppe bearbeiten" data-container="body"><span class="glyphicon glyphicon-pencil"></span></a></li>
				<li><a href="#confirmDeleteGroup" role="button" class="btn btn-default" rel="tooltip" data-toggle="modal" data-original-title="Gruppe löschen" data-container="body"><span class="glyphicon glyphicon-trash"></span></a></li>
			}
			@if(!Secured.isMemberOfGroup(group, Component.currentAccount)) {
				<li><a href="@routes.GroupController.join(group.id)" role="button" class="btn btn-default" rel="tooltip" data-original-title="Beitreten" data-container="body"><span class="glyphicon glyphicon-ok"></span></a></li>
			}
			<li><a href="#infoModal" role="button" class="btn btn-default" data-toggle="modal" rel="tooltip" data-original-title="Gruppeninfo" data-container="body"><span class="glyphicon glyphicon-info-sign"></span></a></li>
		</ul>
    	</br>
    <div class="noModal">
		<dl>
			<dt>Gruppengründer</dt>
			<dd>@group.owner.firstname @group.owner.lastname</dd>
		</dl>
		<dl>
			<dt>Erstellt am</dt>
			<dd>@group.createdAt.format("dd. MMM yyyy")</dd>
		</dl>
	@form(routes.GroupController.update(group.id), 'id -> "editGroupForm") {
		@textarea(groupForm("description"), 'class -> "form-control", '_label -> "Beschreibung", 'rows -> "5")
		<dl>
			<dt>Sichtbarkeit</dt>
			<dd>
				<div class="radio">
					<label>
						<input type="radio" name="optionsRadios" id="optionsRadios2" value="0" @if(!group.isClosed) {checked}>
						<span class="glyphicon glyphicon-globe"></span> Öffentliche Gruppe
					</label>
				</div>
				<div class="radio">
					<label>
						<input type="radio" name="optionsRadios" id="optionsRadios1" value="1" @if(group.isClosed) {checked}>
						<span class="glyphicon glyphicon-lock"></span> Private Gruppe
					</label>
				</div>
			</dd>
		</dl>
		<button type="submit" class="btn btn-warning">Speichern</button>
	}
		<dl>
			<dt>Mitglieder</dt>
			<dd>
				<table class="table table-hover table-condensed">
					<colgroup>
						<col width="70%">
						<col width="30%">
					</colgroup>
					<thead>
						<tr>
							<th>Name</th>
							<th>Optionen</th>
						</tr>
					</thead>
					<tbody>
						@defining(GroupAccount.findAccountsByGroup(group)) { accounts =>
				             @for(account <- accounts) {              
	                            <tr>
	                                <td>
	                                	<a data-placement="top" data-original-title="@account.name" data-content="Rolle: Student &lt;br /&gt; Studiengang: Angewandte Informatik" data-delay="500" data-trigger="hover" data-html="true" rel="popover" href="@routes.ProfileController.view(account.id)">@account.name</a>
	                                </td>
	                                @if(account.id != group.owner.id){
	                                <td>
	                                	<a href="@routes.GroupController.removeMember(group.id,account.id)" rel="tooltip" title="Löschen">
	                                		<span class="glyphicon glyphicon-remove"></span>
	                                	</a>
	                                </td>
	                                }
	                            </tr>
	                         }
	              		}
					</tbody>
				</table>
			</dd>
		</dl>
		
	</div>
}