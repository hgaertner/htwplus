@(approvedGroups: List[Group], unapprovedGroups: List[GroupAccount], groupForm: Form[Group])

@import helper._

@main("Gruppen") {


    
    <!-- Content -->
            <!-- createNewGroupModal -->
            <div id="createNewGroupModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="createNewGroupModalLabel" aria-hidden="true">
            @views.html.Group.snippets.addModal(groupForm)
            </div>
            <!-- Ende createNewGroupModal -->
            
            <!-- searchModal -->
            <div id="searchModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
            	@views.html.Group.snippets.searchModal(approvedGroups)    
            </div>
            <!-- Ende searchModal -->
            
			<!-- Start infoModal 
				Fuer alle Gruppen ein infoModal. Ein bisschen dirty, oder?
			-->
			@for(group <- approvedGroups) {	
			<div id="infoModal@group.id" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="infoModalLabel" aria-hidden="false">
	        	@views.html.Group.snippets.infoModal(group)    
	        </div>
	        }
            <!-- Ende infoModal --> 
            
			<!-- Start editModal -->
			<div id="editModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="infoModalLabel" aria-hidden="true">

			<div class="loading-modal">
			<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"
						aria-hidden="true">x</button>
					<h3 id="editModalLabel">Gruppe bearbeiten</h3>
				</div>
				<div class="modal-body"><div id="loading"></div>Wird geladen</div>
				<div class="modal-footer">
					<button class="btn" data-dismiss="modal" aria-hidden="true">Schließen</button>
				</div>
			</div>
			</div>
            <!-- Ende editModal -->
                                   
            <br />
            @defining(Component.currentAccount()) { user =>
			@if(!unapprovedGroups.isEmpty){
            <h1>Offene Anfragen</h1>
            <table class="table table-hover">
                <colgroup>
                    <col width="20%">
                    <col width="40%">
                    <col width="20%">
                    <col width="20%">
                </colgroup>
                <thead>
                    <tr>
                        <th>Wer?</th>
                        <th>Welche Gruppe?</th>
                        <th>Status</th>
                        <th>Verfügbare Optionen</th>
                    </tr>
                </thead>
                 
                <tbody>
					@for(accountGroup <- unapprovedGroups) {
                	<tr>
                		@if(accountGroup.account.equals(user)){
	                		<td><a href="@routes.ProfileController.view(accountGroup.account.id)">Du</a></td>
	                        <td><a href="@routes.GroupController.view(accountGroup.group.id)">@accountGroup.group.title</a></td>
	                        <td>@if(accountGroup.approved == false) { abgelehnt } else { in Bearabeitung }</td>
	                        <td><a href="@routes.GroupController.removeMember(accountGroup.group.id, accountGroup.account.id)" rel="tooltip" title="löschen"><i class="icon-remove"></i></a></td>	
                		} else {
	                		<td><a href="@routes.ProfileController.view(accountGroup.account.id)">@accountGroup.account.name</a></td>
	                        <td><a href="@routes.GroupController.view(accountGroup.group.id)">@accountGroup.group.title</a></td>
	                        <td>zu bearbeiten</td>
	                        <td>
	                        	<a href="@routes.GroupController.acceptRequest(accountGroup.group.id, accountGroup.account.id)" rel="tooltip" title="akzeptieren"><i class="icon-ok"></i></a>
	                        	<a href="@routes.GroupController.declineRequest(accountGroup.group.id, accountGroup.account.id)" rel="tooltip" title="zurückweisen"><i class="icon-remove"></i></a>
	                        </td>	
                		}
                        
                    </tr>
                	}
                </tbody>
            </table>
            <hr /><br />
            }
            <h1>Meine Gruppen
                <div class="btn-group">
                    <a href="#createNewGroupModal" role="button" class="btn" data-toggle="modal"><i class="icon-plus"></i></a>
                    <a href="#searchModal" role="button" class="btn" data-toggle="modal"><i class="icon-search"></i></a>
                </div>
            </h1>
            <table class="table table-hover">
                <colgroup>
                    <col width="75%">
                    <col width="25%">
                </colgroup>
                <thead>
                    <tr>
                        <th>Gruppenname</th>
                        <th>Verfügbare Optionen</th>
                    </tr>
                </thead>
                <tbody>
                
                	@for(group <- approvedGroups) {
                                                                 
                    <tr>
                        <td>
	                        @if(group.isClosed == true) {
	                           <i class="icon-lock"></i>
	                        } else {
	                           <i class="icon-globe"></i>
	                        }
	                        <a href="@routes.GroupController.view(group.id)">@if(Secured.isOwnerOfGroup(group,user)){<b> @group.title</b></a> <small>(gegr&uuml;ndet)</small>}else{ @group.title}
	                    </td>
                        <td>
                        	<a href="#infoModal@group.id"  rel="tooltip" data-toggle="modal" data-original-title="Info"><i class="icon-info-sign"></i></a>
                        	@if(Secured.isOwnerOfGroup(group, user)){
                        		<a href="@routes.GroupController.edit(group.id)" rel="tooltip" data-toggle="modal" data-original-title="Gruppe bearbeiten" class="editGroup"><i class="icon-pencil"></i></a>
                        		<a href="@routes.GroupController.delete(group.id)" rel="tooltip" title="Gruppe löschen"><i class="icon-trash"></i></a>
                        	}else{
                        	<a href="@routes.GroupController.removeMember(group.id, user.id)" rel="tooltip" data-toggle="modal" data-original-title="Verlassen"><i class="icon-remove"></i></a>
                        	}
                        	
                        </td>
                    </tr>
                    <!-- <i class="icon-globe"> -->
                    
                	}
                
                </tbody>
            </table>
            }
<!-- Ende Content -->
    
    
}