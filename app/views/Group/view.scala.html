@(group: Group, posts:List[Post], postForm: Form[Post], isMember: Boolean)
@import helper._
@import models.enums._

@main("Group View") {

	<!-- Start infoModal -->
	<div class="modal fade" id="infoModal" tabindex="-1" role="dialog" aria-labelledby="confirmModalLabel" aria-hidden="true">
		@views.html.Group.snippets.infoModal(group)    
	</div>
	<!-- Ende infoModal -->
	
	<!-- Start confirmDeleteGroupModal -->
	<div class="modal fade" id="confirmDeleteGroup" tabindex="-1" role="dialog" aria-labelledby="confirmModalLabel" aria-hidden="true">
		@views.html.Group.snippets.deleteGroupModal(group)   
	</div>
	<!-- End confirmDeleteGroupModal -->
	
	
	<div class="clear">
	@if(group.groupType != GroupType.close || Secured.isMemberOfGroup(group, Component.currentAccount)) {
		<h2 id="truncated">@group.title</h2>
		<div class="miniMenue">
			@{group.groupType match {
				case GroupType.open => {<i class="glyphicon glyphicon-globe"></i>}
				case GroupType.close => {<i class="glyphicon glyphicon-lock"></i>}
				case GroupType.course => {<i class="glyphicon glyphicon-briefcase"></i>}
			} }
			<div class="btn-group">
				<a href="@routes.GroupController.view(group.id)" role="button" class="btn btn-default active" rel="tooltip" data-original-title="Gruppennewsstream" data-container="body"><span class="glyphicon glyphicon-comment"></span></a>
				<a href="@routes.GroupController.media(group.id)" role="button" class="btn btn-default" rel="tooltip" data-original-title="Gruppenmedien" data-container="body"><span class="glyphicon glyphicon-file"></span></a>
			@if(Secured.isOwnerOfGroup(group, Component.currentAccount)) {
				<a href="@routes.GroupController.edit(group.id)" role="button" class="btn btn-default" rel="tooltip" data-original-title="Gruppe bearbeiten" data-container="body"><span class="glyphicon glyphicon-pencil"></span></a>
				<a href="#confirmDeleteGroup" role="button" class="btn btn-default" rel="tooltip" data-toggle="modal" data-original-title="Gruppe lÃ¶schen" data-container="body"><span class="glyphicon glyphicon-trash"></span></a>
			}
			@if(!Secured.isMemberOfGroup(group, Component.currentAccount)) {
				<a href="@routes.GroupController.join(group.id)" role="button" class="btn btn-default" rel="tooltip" data-original-title="Beitreten" data-container="body"><span class="glyphicon glyphicon-ok"></span></a>
			}
				<a href="#infoModal" role="button" class="btn btn-default" data-toggle="modal" rel="tooltip" data-original-title="Gruppeninfo" data-container="body"><span class="glyphicon glyphicon-info-sign"></span></a>
			</div>
		</div>
		<br />
				
		@views.html.snippets.postForm(group.id, models.Post.GROUP, postForm) 
		
		@if(posts != null) {
			@for(post <- posts) {
				@if(post.parent == null){
					@views.html.snippets.postView(post, postForm,  models.Post.GROUP)
				}
			}
		}
	
	} else {
		<h2>
			@group.title
			<span class="glyphicon glyphicon-lock"></span>
			<div class="btn-group">
				<a href="#infoModal@group.id" type="button" class="btn btn-default" data-toggle="modal" rel="tooltip" data-original-title="Gruppeninfo" data-container="body"><span class="glyphicon glyphicon-info-sign"></span></a>
				<a href="@routes.GroupController.join(group.id)" type="button" class="btn btn-default" rel="tooltip" data-original-title="Beitreten" data-container="body"><span class="glyphicon glyphicon-ok"></span></a>
			</div>
		</h2>
		<br />
		<h4>Diese Gruppe ist leider geschlossen.</h4>

	}
	</div>
}
